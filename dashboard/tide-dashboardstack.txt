type: vertical-stack
cards:
  - type: custom:bubble-card
    card_type: button
    button_type: state
    name: Tide Phase
    icon: mdi:waves
    entity: sensor.tide_phase
    show_state: true
    sub_button:
      - entity: sensor.tide_height_now
        show_name: false
        show_icon: false
        show_state: true
        show_background: false
      - entity: sensor.tide_percent
        show_name: false
        show_last_changed: false
        show_state: true
        state_background: false
        show_background: true
        icon: ""
        show_icon: false
    rows: "1"
  - type: custom:bubble-card
    card_type: button
    button_type: state
    name: Low Tide
    icon: mdi:arrow-down-bold
    entity: sensor.tide_low_height
    show_state: true
    sub_button:
      - entity: sensor.tide_low_time
        name: Time
        show_state: true
        show_background: true
        show_icon: false
        state_background: false
    card_mod:
      style: |
        ha-card {
          {% set val = states('sensor.tide_low_height') | float(0) %}
          {% if val < 0.2 %}
            --primary-color: orange;
            background: orange !important;
          {% elif val < 0 %}
            --primary-color: red;
            background: red !important;
          {% else %}
            --primary-color: blue;
            background: blue !important;
          {% endif %}
        }
  - type: custom:bubble-card
    card_type: button
    button_type: state
    name: High Tide
    icon: mdi:arrow-up-bold
    entity: sensor.tide_high_height
    show_state: true
    sub_button:
      - entity: sensor.tide_high_time
        name: Time
        show_state: true
        show_background: true
        show_icon: false
    rows: "1"
    card_mod:
      style: |
        ha-card {
          {% set val = states('sensor.tide_high_height') | float(0) %}
          {% if val > 7.2 %}
            --primary-color: orange;
            background: orange !important;
          {% elif val < 0 %}
            --primary-color: red;
            background: red !important;
          {% else %}
            --primary-color: blue;
            background: blue !important;
          {% endif %}
        }
